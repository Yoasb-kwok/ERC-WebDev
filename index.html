<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ERC æ™ºèƒ½å¯¦æ™¯é§•é§›é«”é©—é¤¨</title>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Noto+Sans+TC:wght@300;400;700&display=swap" rel="stylesheet">
    <!-- FontAwesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
    <style>
        /* --- CSS VARIABLES (LIGHT THEME) --- */
        :root {
            --racing-red: #ff1801;
            --electric-blue: #007cc7;
            --bg-white: #ffffff;
            --bg-light: #f4f6f8;
            --text-main: #1a1a1a;
            --text-muted: #555555;
            --font-display: 'Orbitron', sans-serif;
            --font-body: 'Noto Sans TC', sans-serif;
            --whatsapp-green: #25d366;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: var(--bg-white);
            color: var(--text-main);
            font-family: var(--font-body);
            overflow-x: hidden;
            line-height: 1.6;
        }

        /* --- NAVIGATION --- */
        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 40px;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 2px solid var(--racing-red);
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        /* èˆŠçš„ .logo æ¨£å¼å·²ç§»é™¤ï¼Œç¾åœ¨ Logo ç”±åœ–ç‰‡æ§åˆ¶ */
        .logo-link {
            display: flex; /* ç¢ºä¿åœ–ç‰‡èƒ½æ­£ç¢ºé¡¯ç¤º */
            align-items: center;
            text-decoration: none; /* ç§»é™¤é€£çµä¸‹åŠƒç·š */
        }
        
        .logo-img {
            height: 45px; /* è¨­å®šæ‚¨çš„ Logo åœ–ç‰‡é«˜åº¦ */
            width: auto; /* ä¿æŒåœ–ç‰‡æ¯”ä¾‹ */
            transition: transform 0.3s ease;
        }

        .logo-img:hover {
            transform: scale(1.05); /* é¼ æ¨™æ‡¸åœæ™‚ç¨å¾®æ”¾å¤§ */
        }

        .nav-links {
            display: flex;
            gap: 20px;
        }

        .nav-btn {
            background: none;
            border: none;
            color: var(--text-muted);
            font-family: var(--font-body);
            font-size: 1rem;
            cursor: pointer;
            font-weight: 600;
            transition: 0.3s;
            padding: 5px 10px;
        }

        .nav-btn:hover, .nav-btn.active {
            color: var(--racing-red);
        }

        .download-nav {
            background-color: var(--racing-red);
            color: white !important;
            padding: 8px 20px;
            border-radius: 4px;
            transform: skewX(-15deg);
        }
        
        .download-nav span { display: inline-block; transform: skewX(15deg); }
        .download-nav:hover { 
            background-color: var(--text-main); 
            color: white; 
        }

        /* Mobile menu toggle button (hidden by default) */
        .menu-toggle {
            display: none; /* Hidden by default on desktop */
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--text-main);
            cursor: pointer;
            z-index: 1001; 
        }

        /* --- WHATSAPP FLOATING BUTTON --- */
        .whatsapp-float {
            position: fixed;
            width: 60px;
            height: 60px;
            bottom: 30px;
            right: 30px;
            background-color: var(--whatsapp-green);
            color: #FFF;
            border-radius: 50px;
            text-align: center;
            font-size: 35px;
            box-shadow: 2px 2px 10px rgba(0,0,0,0.2);
            z-index: 2000; 
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .whatsapp-float:hover {
            transform: scale(1.1);
            box-shadow: 2px 2px 15px rgba(0,0,0,0.3);
            background-color: #1ebd57;
        }

        /* --- PAGE CONTENT HANDLING --- */
        .page-section {
            display: none;
            padding-top: 80px; 
            min-height: 100vh;
            animation: fadeIn 0.5s ease-in-out;
        }

        .page-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- HERO SLIDER STYLES --- */
        .hero {
            position: relative;
            padding: 0;
            height: 85vh;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: #ffffff; 
        }

        .slider-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        .slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 0.8s ease-in-out;
            background-size: cover;
            background-position: center;
        }

        .slide::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.7) 0%, rgba(0, 0, 0, 0.4) 100%);
        }

        .slide.active { opacity: 1; }

        .hero-content {
            position: relative;
            z-index: 2;
            padding: 20px;
        }

        .hero h1 {
            font-size: 3.5rem;
            margin-bottom: 20px;
            font-weight: 900;
            text-shadow: 2px 2px 10px rgba(0,0,0,0.5);
            line-height: 1.2;
        }

        .hero p {
            font-size: 1.2rem;
            color: #e0e0e0;
            max-width: 600px;
            margin: 0 auto 40px auto;
            text-shadow: 1px 1px 5px rgba(0,0,0,0.5);
        }

        .slider-arrow {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(5px);
            color: white;
            border: 1px solid white;
            font-size: 24px;
            padding: 15px 20px;
            cursor: pointer;
            z-index: 10;
            transition: all 0.3s ease;
            border-radius: 50%;
        }

        .slider-arrow:hover {
            background: white;
            color: black;
        }

        .prev { left: 30px; }
        .next { right: 30px; }

        /* --- BUTTONS --- */
        .cta-button {
            display: inline-block;
            padding: 15px 40px;
            background: var(--racing-red);
            color: white;
            text-decoration: none;
            font-weight: bold;
            font-size: 1.2rem;
            border: 2px solid var(--racing-red);
            transition: 0.3s;
            transform: skewX(-15deg);
            cursor: pointer;
            box-shadow: 5px 5px 15px rgba(0,0,0,0.2);
        }

        .cta-button span { display: inline-block; transform: skewX(15deg); }
        .cta-button:hover {
            background: white;
            color: var(--racing-red);
        }
        
        .btn-secondary {
            background: transparent;
            border-color: white;
            margin-left: 10px;
        }
        .btn-secondary:hover {
            background: white;
            color: var(--text-main);
            border-color: white;
        }

        /* --- CONTAINER & CARDS --- */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 50px 20px;
        }

        .section-header {
            text-align: center;
            margin-bottom: 50px;
        }
        
        .section-header h2 {
            font-size: 2.5rem;
            color: var(--text-main);
            margin-bottom: 15px;
        }

        /* èª²ç¨‹å°ˆç”¨ï¼šé›™æ¬„ (1fr 1fr) */
        .grid-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            max-width: 900px;
            margin: 0 auto;
            align-items: start;
        }

        .split-container {
            display: flex;           /* é–‹å•Ÿä¸¦æ’ */
            align-items: center;     /* å‚ç›´ç½®ä¸­ */
            gap: 40px;               /* åœ–æ–‡é–“è· */
            margin-bottom: 50px;     /* æ¯ä¸€å¤§è¡Œä¹‹é–“çš„è·é›¢ */
        }

        .split-container:last-child {
            margin-bottom: 0;
            border-bottom: none;
        }

        .split-image,
        .split-text {
            flex: 1;                 /* å…©å€‹å€å¡Šå¹³åˆ†ç©ºé–“ (1:1) */
            min-width: 0;
        }
        .split-image img {
            width: 100%;
            height: auto;
            display: block;
            border-radius: 8px;
        }

        .split-container:nth-child(even) {
        flex-direction: row-reverse;
        }


        /* é¦–é æ ¸å¿ƒåƒ¹å€¼å°ˆç”¨ï¼šä¸‰æ¬„ (3, 1fr) */
        .values-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr); 
            gap: 25px;
            max-width: 1200px;
            margin: 0 auto;
            text-align: center;
        }

        .card {
            background: var(--bg-light);
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            transition: transform 0.3s ease;
            border-left: 4px solid var(--electric-blue);
            position: relative;
            overflow: hidden;
            text-align: center;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }

        .card h3 {
            color: var(--electric-blue);
            margin-bottom: 15px;
            font-size: 1.25rem;
        }
        
        .card-date {
            color: var(--racing-red);
            font-size: 0.9rem;
            font-weight: bold;
            margin-bottom: 10px;
            display: block;
        }



        .event div{
            width: 300px;
            text-align: center;
        }

        .event img{
            width: 50%;
            border-radius: 10px;
        }

        .einfo {
            width: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .tag {
            display: inline-block;
            background: rgba(0, 124, 199, 0.1);
            color: var(--electric-blue);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            margin-top: 15px;
            margin-right: 5px;
        }

        /* --- DOWNLOAD SECTION --- */
        .download-container {
            max-width: 800px;
            margin: 0 auto;
            background: var(--bg-light);
            padding: 50px;
            border-top: 5px solid var(--racing-red);
            text-align: center;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            border-radius: 8px;
        }
        
        .requirements {
            text-align: left;
            background: white;
            padding: 20px;
            margin: 30px 0;
            border-radius: 5px;
            border: 1px solid #e0e0e0;
        }
        .requirements h4 { margin-bottom: 10px; }
        .requirements ul { list-style: none; padding-left: 0; }
        .requirements li { color: var(--text-muted); margin-bottom: 5px; }
        .requirements li i { color: var(--electric-blue); width: 20px; }

        /* --- BOOKING PAGE STYLES --- */
        .booking-container {
            max-width: 900px;
            margin: 0 auto;
            background: var(--bg-light);
            padding: 40px;
            border-radius: 8px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            text-align: center;
        }

        .booking-container label {
            display: block;
            margin-bottom: 10px;
            font-weight: bold;
            color: var(--text-main);
            font-size: 1.1rem;
        }

        .booking-container input[type="date"] {
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-family: var(--font-body);
            font-size: 1rem;
            margin-bottom: 20px;
            width: 100%;
            max-width: 300px;
            text-align: center;
            background-color: white;
        }

        .time-slots-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 10px;
            margin-top: 20px;
            margin-bottom: 30px;
            justify-content: center;
        }

        .time-slot-btn {
            background-color: white;
            border: 1px solid var(--electric-blue);
            color: var(--electric-blue);
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-family: var(--font-body);
            font-size: 1rem;
            transition: all 0.2s ease;
            width: 100%;
        }

        .time-slot-btn:hover {
            background-color: var(--electric-blue);
            color: white;
        }

        .time-slot-btn.active {
            background-color: var(--racing-red);
            border-color: var(--racing-red);
            color: white;
            box-shadow: 0 0 10px rgba(255, 24, 1, 0.4);
        }

        .booking-form {
            text-align: left;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #e0e0e0;
        }

        .booking-form .form-group {
            margin-bottom: 15px;
        }

        .booking-form label {
            font-weight: 600;
            color: var(--text-main);
            margin-bottom: 5px;
        }

        .booking-form input[type="text"],
        .booking-form input[type="tel"],
        .booking-form input[type="email"] {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-family: var(--font-body);
            font-size: 1rem;
            box-sizing: border-box;
            background-color: white;
        }

        .booking-form button[type="submit"] {
            width: auto;
            margin-top: 20px;
            transform: skewX(0deg); /* Remove skew for form button */
        }
        .booking-form button[type="submit"] span {
            transform: skewX(0deg);
        }


        /* --- FOOTER --- */
        footer {
            background: #f8f8f8;
            text-align: center;
            padding: 40px;
            margin-top: 50px;
            border-top: 1px solid #e0e0e0;
            color: var(--text-muted);
        }
        footer p {
            color: var(--text-muted);
            font-size: 0.9rem;
            margin-bottom: 8px;
        }
        .social-links a {
            color: var(--text-muted);
            margin: 0 10px;
            font-size: 1.5rem;
            transition: color 0.3s ease;
        }
        .social-links a:hover {
            color: var(--electric-blue);
        }
        
        /* Responsive */
        @media (max-width: 900px) {
            /* Navigation adjustments for mobile */
            nav {
                padding: 15px 20px; /* Adjust nav padding */
                flex-wrap: wrap; /* Allow elements to wrap */
            }
            .nav-links {
                display: none; /* Hide nav links by default on mobile */
                flex-direction: column;
                width: 100%;
                position: absolute;
                top: 70px; /* Position below the main nav bar */
                left: 0;
                background: rgba(255, 255, 255, 0.98);
                border-top: 1px solid #eee;
                box-shadow: 0 5px 15px rgba(0,0,0,0.1);
                padding: 10px 0;
                z-index: 999;
                max-height: calc(100vh - 70px);
                overflow-y: auto; /* Enable scrolling for long menus */
            }
            .nav-links.open {
                display: flex; /* Show menu when 'open' class is applied */
            }
            .nav-links .nav-btn {
                width: 100%;
                text-align: left;
                padding: 12px 20px;
                border-bottom: 1px solid #f0f0f0;
            }
            .nav-links .nav-btn:last-child {
                border-bottom: none;
            }
            .menu-toggle {
                display: block; /* Show hamburger icon on mobile */
            }

            /* General page adjustments */
            .hero h1 { font-size: 2rem; }
            .hero p { font-size: 1rem; margin: 0 auto 20px auto; }
            .hero { height: 60vh; }
            .cta-button, .btn-secondary {
                display: block; /* Make buttons stack vertically */
                width: calc(100% - 40px); /* Full width minus container padding */
                margin: 10px auto; /* Center buttons and add vertical spacing */
                transform: skewX(0deg); /* Remove skew for better readability */
                text-align: center;
                padding: 12px 20px;
            }
            .cta-button span { transform: skewX(0deg); } /* Remove skew from span content */
            .btn-secondary { margin-left: auto; margin-right: auto; } /* Ensure secondary button centers */
            
            /* Grid containers now always stack on mobile */
            .grid-container, .values-container {
                grid-template-columns: 1fr;
            }
            .container {
                padding: 20px; /* Reduce general container padding */
            }
            .section-header h2 {
                font-size: 2rem;
            }
            .section-header p {
                font-size: 1rem;
            }
            .download-nav { /* Ensure download nav button also removes skew */
                transform: skewX(0deg);
            }
            .download-nav span {
                transform: skewX(0deg);
            }
        }

        /* Further adjustments for very small phone screens */
        @media (max-width: 480px) {
            nav { padding: 10px 15px; }
            .logo-img { height: 35px; } /* Smaller logo on very small screens */
            .hero h1 { font-size: 1.8rem; }
            .hero p { font-size: 0.9rem; }
            .cta-button, .btn-secondary {
                font-size: 1rem;
                padding: 10px 15px;
            }
            .slider-arrow {
                padding: 8px 12px;
                font-size: 18px;
                left: 10px;
                right: 10px;
            }
            .hero-content {
                padding: 10px;
            }
            footer {
                padding: 20px;
                font-size: 0.8rem;
            }
            .social-links a {
                font-size: 1.2rem;
                margin: 0 5px;
            }
        }

        /* Hide slider arrows on mobile screens */
        @media (max-width: 768px) {
            .slider-arrow { display: none; } /* NEW: Hide slider arrows on small screens */
        }
    </style>
</head>
<body>

    <!-- NAVIGATION -->
    <nav>
        <!-- Updated Logo Link with Image -->
        <a href="#" class="logo-link" onclick="showPage('home')">
            <img src="images/logo.png" alt="ERC Logo" class="logo-img">
            <!-- If you still want text next to the image, uncomment the line below -->
            <!-- <span class="logo-text">ERC Project</span> -->
        </a>
        <button class="menu-toggle" aria-label="Toggle navigation" onclick="toggleMobileMenu()">
            <i class="fas fa-bars"></i>
        </button>
        <div class="nav-links" id="mobile-nav-links">
            <button class="nav-btn active" onclick="showPage('home')">é¦–é </button>
            <button class="nav-btn" onclick="showPage('exhibitions')">å±•è¦½æ´»å‹•</button>
            <button class="nav-btn" onclick="showPage('courses')">èª²ç¨‹</button>
            <button class="nav-btn" onclick="showPage('about')">é—œæ–¼ ERC</button>
            <button class="nav-btn" onclick="showPage('booking')">é ç´„é«”é©—</button> 
            <button class="nav-btn" onclick="showPage('contact')">è¯çµ¡æˆ‘å€‘</button>
             <!-- NEW NAV BUTTON -->
            <button class="nav-btn download-nav" onclick="showPage('download')"><span><i class="fas fa-download"></i> è»Ÿé«”ä¸‹è¼‰</span></button>
        </div>
    </nav>

    <!-- WHATSAPP FLOATING BUTTON -->
    <a href="https://wa.me/85296061079" class="whatsapp-float" target="_blank">
        <i class="fab fa-whatsapp"></i>
    </a>

    <!-- === SECTION: HOME === -->
    <section id="home" class="page-section active">
        <div class="hero">
            <!-- Background Slider Container (4 Images) -->
            <div class="slider-container">
                <div class="slide active" style="background-image: url('images/P1.jpg');"></div>
                <div class="slide" style="background-image: url('images/P2.jpg');"></div>
                <div class="slide" style="background-image: url('images/banner3.jpg');"></div>
                <div class="slide" style="background-image: url('images/banner4.jpg');"></div>
            </div>

            <!-- Arrows -->
            <button class="slider-arrow prev" onclick="changeSlide(-1)">&#10094;</button>
            <button class="slider-arrow next" onclick="changeSlide(1)">&#10095;</button>

            <!-- Text Content -->
            <div class="hero-content">
                <h1>æ™ºèƒ½å¯¦æ™¯é§•é§› Â· <span style="color:var(--racing-red)">å®‰å…¨å­¸ç¿’æ–°é«”é©—</span></h1>
                <p>çµåˆè™›æ“¬å¯¦æ™¯ã€äººå·¥æ™ºèƒ½èˆ‡é›»å‹•è»ŠæŠ€è¡“ï¼Œå‰µæ–°çš„ STEM æ•™è‚²æ–¹æ¡ˆ</p>
                <div style="margin-top: 30px;">
                    <button class="cta-button" onclick="showPage('courses')"><span>æŸ¥çœ‹èª²ç¨‹</span></button>
                    <button class="cta-button btn-secondary" onclick="showPage('contact')"><span>è¯çµ¡æˆ‘å€‘</span></button>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="section-header">
                <h2>æ ¸å¿ƒåƒ¹å€¼</h2>
                <p>ERC æ˜¯ä¸€å€‹ä»¥æ™ºèƒ½é§•é§›é«”é©—çš„ä¸€å€‹å“ç‰Œï¼Œé›†åˆå››å¤§ç§‘æŠ€å…ƒç´ ï¼ŒEVï¼ŒVRï¼ŒAIåŠTRã€‚é€™æŠ€è¡“ç”±ä¸€ç­PolyU æ•¸æ“šç§‘å­¸åŠäººå·¥æ™ºèƒ½ç³»çš„å­¸ç”Ÿè‡ªå®¶ç ”ç™¼å‰µç«‹ã€‚è€Œé€™é …é«”é©—ç”±é…å‚™ç¬¬ä¸€äººç¨±è¦–è§’(First-person view)é¡é ­çš„æ¨¡å‹é›»å‹•è»Š(EV)ï¼Œå°‡å°ˆå±¬ä¸åŒè³½é“ç•«é¢ï¼Œå¯¦æ™‚å‚³é€åˆ°æ¨¡æ“¬é§•é§›è‰™çš„è™›æ“¬å¯¦å¢ƒ(VR)çœ¼é¡ä¸­ï¼Œä½¿åƒåŠ è€…å¯æ–¼æ¨¡å‹é§•é§›è‰™ä¸­ï¼Œé‹ç”¨è»šç›¤åŠè…³è¸æ¿è¦ªæ‰‹æ“æ§è³½è»Šï¼Œæ„Ÿå—æ¯ä¸€å€‹è½‰å‘å’ŒåŠ é€Ÿï¼Œé«”é©—è…ä¸Šè…ºç´ é£†å‡çš„å¿«æ„Ÿ !</p>
            </div>
            
            <div class="values-container">
                <div class="card">
                    <h3><i class="fas fa-graduation-cap"></i> æ•™è‚²å‰µæ–°</h3>
                    <p>çµåˆ VRã€AI èˆ‡å¯¦æ™¯æŠ€è¡“çš„æ™ºèƒ½æ•™å­¸æ–¹æ¡ˆã€‚</p>
                </div>
                <div class="card">
                    <h3><i class="fas fa-microchip"></i> ç§‘æŠ€å“è¶Š</h3>
                    <p>æä¾›æœ€æ–°çš„ç¡¬é«”èˆ‡è»Ÿé«”æ•´åˆè§£æ±ºæ–¹æ¡ˆã€‚</p>
                </div>
                <div class="card">
                    <h3><i class="fas fa-lightbulb"></i> æŒçºŒå‰µæ–°</h3>
                    <p>å¯¦ç¾å®‰å…¨æ™ºèƒ½é§•é§›åŠç„¡äººé§•é§›æ–¹æ¡ˆã€‚</p>
                </div>
            </div>
        </div>
    </section>

    <!-- === SECTION: ABOUT === -->
    <section id="about" class="page-section">
        <div class="hero" style="height: 40vh;">
            <div class="hero-content">
                <h1>é—œæ–¼ ERC</h1>
                <p>æ™ºèƒ½å¯¦æ™¯é§•é§›é«”é©—é¤¨èˆ‡å¾·å®‰é§•é§›å­¸æ ¡åˆä½œ</p>
            </div>
            <div class="slider-container">
                <div class="slide active" style="background-image: url('images/car.png');"></div>
            </div>
        </div>

        <div class="container">
            <div style="max-width: 800px; margin: 0 auto; background: var(--bg-light); padding: 40px; border-radius: 8px;">
                <h3 style="color: var(--electric-blue); margin-bottom: 20px;">æˆ‘å€‘çš„ä½¿å‘½</h3>
                <p style="margin-bottom: 20px;">ERC æ™ºèƒ½å¯¦æ™¯é§•é§›é«”é©—é¤¨ç”±æ•™è‚²åŠé§•é§›è¨“ç·´å°ˆå®¶å…±åŒç­–åŠƒï¼Œçµåˆè™›æ“¬å¯¦æ™¯ï¼ˆVRï¼‰ã€äººå·¥æ™ºèƒ½ï¼ˆAIï¼‰ã€é›»å‹•è»Šï¼ˆEVï¼‰åŠé™æ„Ÿç¾å¯¦ï¼ˆTRï¼‰æŠ€è¡“ï¼Œç‚ºé¦™æ¸¯æä¾›é¦–å‰µçš„æ™ºèƒ½é§•é§›æ•™è‚²å¹³å°ã€‚</p>
                <p>é€éç§‘æŠ€å‰µæ–°ï¼Œè®“æ¯ä½å­¸ç”Ÿéƒ½èƒ½äº«å—å®‰å…¨ã€é«˜æ•ˆä¸”å¯Œæœ‰å•Ÿç™¼æ€§çš„é§•é§›å­¸ç¿’é«”é©—ï¼ŒåŸ¹è‚²å…·å‚™é“è·¯å®‰å…¨æ„è­˜å’Œ STEM æŠ€èƒ½çš„æœªä¾†äººæ‰ã€‚</p>
                
                <hr style="margin: 30px 0; border: 0; border-top: 1px solid #ddd;">
                
                <h3 style="color: var(--text-main); margin-bottom: 10px;">å¾·å®‰é§•é§›å­¸æ ¡æœ‰é™å…¬å¸</h3>
                <p style="margin-bottom: 20px;">å¾·å®‰é§•é§›å­¸æ ¡ - ç”±æ—ç§‰å¾·å…ˆç”Ÿæ–¼ 1970 å¹´æˆç«‹ï¼Œå·²æœ‰äº”åå¤šå¹´æ­·å²ï¼Œä»¥é“è·¯äº¤é€šå®‰å…¨ï¼ŒåŸ¹è¨“è‰¯å¥½é§•é§›è€…ç‚ºç›®æ¨™ã€‚è‡´åŠ›ç‚ºå¸‚æ°‘æä¾›ä¸åŒçš„é§•é§›èª²ç¨‹ï¼Œå…¨é¢å”åŠ©å­¸å“¡æŒæ¡é§•é§›çš„æŠ€å·§ä¸¦å®Œæˆé§•é§›è€ƒè©¦ã€‚â€‹</p>
		    <p style="margin-bottom: 20px;">è¿‘å¹´æ›´èˆ‡ é¦™æ¸¯å–„å°æœƒ åˆä½œï¼Œç‚ºæ›´æ–°äººä»•æä¾›è¼•å‹è²¨è»ŠåŠçš„å£«èª²ç¨‹ï¼Œè®“ä»–å€‘æœ‰æ©Ÿæœƒç¿’ä¸€æŠ€æ—èº«ï¼Œä»¥è£å‚™ä»–å€‘é‡æŠ•ç¤¾æœƒå·¥ä½œã€‚åœ¨2023å¹´1æœˆé¦™æ¸¯ç¤¾æœƒæœå‹™è¯æœƒé ’è´ˆã€Œå•†ç•Œå±•é—œæ‡·ã€è¨ˆåŠƒæ¨™èªŒï¼Œä»¥è¡¨æšæœ¬æ ¡å°é—œæ‡·ç¤¾å€ã€é—œæ‡·å“¡å·¥åŠé—œæ‡·ç’°å¢ƒçš„æ‰¿æ“”ã€‚â€‹</p>
		    <p><b>å…¬å¸è¦æ¨¡åŠç¾æ³ :â€‹</b></p>
		    <ul>
			    <li>å…¨æ¸¯å››å¤§é§•é§›å­¸æ ¡ä¹‹ä¸€â€‹</li>
			    <li>ç§å®¶è»Šï¼Œè¼•å‹è²¨è»Šï¼Œå·´å£«ï¼Œè²¨è»Šå…±è¶…é30éƒ¨â€‹</li>
			    <li>æ¯å¹´æ•™å°è¶…é2000å€‹å­¸ç”Ÿâ€‹</li>
			    <li>å¸«å‚…äººæ•¸è¶…é30äºº</li>
		    </ul>
            </div>
        </div>
    </section>

    <!-- === SECTION: EXHIBITIONS === -->
    <section id="exhibitions" class="page-section">
        <div class="hero" style="height: 40vh;">
            <div class="hero-content">
                <h1>å±•è¦½åŠé«”é©—æ´»å‹•</h1>
                <p>ERC å·²æ–¼å¤šå€‹å¤§å‹æ´»å‹•ä¸­å±•å‡ºæ™ºèƒ½å¯¦æ™¯é§•é§›é«”é©—</p>
            </div>
            <div class="slider-container">
                <div class="slide active" style="background-image: url('images/exhibit.png');"></div>
            </div>
        </div>

        <div class="container" style="max-width: 1000px; margin: 0 auto; padding: 40px 20px;">
            <div class="split-container">
                <div class="split-image">
                    <img src="images/e3.jpg" alt="è˜‡æµ™å…¬å­¸" >
                </div>
                <div class="split-text">
                    <h3>2025å¹´ 11æœˆ 30æ—¥<br>è˜‡æµ™å…¬å­¸(åŒ—è§’)é–‹æ”¾æ—¥</h3>
                    <p>ERC å°‡STEM æ•™è‚²å¸¶å…¥æ ¡åœ’ï¼Œè®“å­¸ç”Ÿè¦ªæ‰‹æ“æ§çµåˆ AI èˆ‡ VR æŠ€è¡“çš„æ¨¡å‹é›»å‹•è»Šï¼Œåœ¨å®‰å…¨ç’°å¢ƒä¸­ææ—©èªè­˜é“è·¯å®‰å…¨ã€æ©Ÿæ¢°çµæ§‹èˆ‡ç¨‹å¼é‚è¼¯ã€‚é€™ä¸åƒ…æ˜¯ä¸€å ´é§•é§›é«”é©—ï¼Œæ›´æ˜¯ä¸€å ‚å•Ÿç™¼æœªä¾†ç§‘æŠ€è¦–é‡çš„å¯¦è¸èª²ã€‚</p>
                    <div class="tags">
                        <span class="tag">è¶£å‘³å°å‘</span>
                        <span class="tag">èµ°é€²æ ¡åœ’</span>
                        <span class="tag">é–‹æ”¾æ—¥</span>
                    </div>
                </div>
            </div>
            <div class="split-container">
                <div class="split-image">
                    <img src="images/e2.jpg" alt="é¦™æ¸¯æˆ¶å¤–ç”¨å“åŠé‹å‹•åšè¦½" >
                </div>
                <div class="split-text">
                    <h3>2025å¹´ 11æœˆ 21â€“23æ—¥<br>é¦™æ¸¯æˆ¶å¤–ç”¨å“åŠé‹å‹•åšè¦½ 2025</h3>
                    <p>å±•ç¤ºé§•é§›æ¨¡æ“¬æŠ€è¡“å¦‚ä½•æ‡‰ç”¨æ–¼æ•™è‚²åŠå®‰å…¨è¨“ç·´ï¼Œçµåˆæˆ¶å¤–åŠé‹å‹•ä¸»é¡Œå±•ç¤ºå‰µæ–°ç§‘æŠ€ã€‚</p>
                    <div class="tags">
                        <span class="tag">é‹å‹•åšè¦½</span>
                        <span class="tag">ç§‘æŠ€å±•ç¤º</span>
                    </div>
                </div>
            </div>
            <div class="split-container">
                <div class="split-image">
                    <img src="images/e1.jpg" alt="é¦™æ¸¯é‹å‹•ç¯€" >
                </div>
                <div class="split-text">
                    <h3>2025å¹´ 8æœˆ 22â€“24æ—¥<br>é¦™æ¸¯é‹å‹•ç¯€ 2025</h3>
                    <p>è¨­ç½®æ™ºèƒ½å¯¦æ™¯é§•é§›é«”é©—å€ï¼Œè®“åƒåŠ è€…ä»¥æ¨¡æ“¬å¯¦æ™¯æ–¹å¼äº†è§£å®‰å…¨é§•é§›åŠé“è·¯é¢¨éšªç®¡ç†ã€‚</p>
                    <div class="tags">
                        <span class="tag">é‹å‹•ç¯€</span>
                        <span class="tag">é«”é©—å±•ç¤º</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- === SECTION: COURSES === -->
    <section id="courses" class="page-section">
        <div class="hero" style="height: 40vh;">
            <div class="hero-content">
                <h1>ERC STEM èª²ç¨‹</h1>
                <p>ç‚ºå°å­¸ç”Ÿã€åˆä¸­ç”Ÿã€å®¶é•·å’Œå­¸æ ¡è€å¸«æä¾›çš„æ™ºèƒ½å¯¦æ™¯é§•é§›å­¸ç¿’é«”é©—</p>
            </div>
            <div class="slider-container">
                <div class="slide active" style="background-image: url('images/course.png');"></div>
            </div>
        </div>

        <div class="container">
            <div class="section-header">
                <h2>å››å¤§èª²ç¨‹æ¨¡çµ„</h2>
                <p>å¾ªåºæ¼¸é€²çš„ STEM å­¸ç¿’è·¯å¾‘</p>
            </div>

            <div class="grid-container">
                <div class="card">
                    <div class="card-date">æ±½è»Šç¡¬ä»¶æ‹¼è£å­¸ç¿’</div>
                    <h3>A1 â€“ Lego ERCèª²ç¨‹â€‹ <br>(ç¡¬ä»¶é«”é©—å­¸ç¿’)</h3>
                    <p>è®“å­¸ç«¥å¯ä»¥å¾ç´°åˆ†çš„ç¡¬ä»¶çµ„åˆæˆä¸€ä»¶å¯ç”¨åŠå¯è¡Œé§›çš„æ±½è»Šï¼Œå¾è€Œå•Ÿç™¼å­¸ç”Ÿçš„å‹•æ‰‹è£½ä½œèƒ½åŠ›åŠèªè­˜æ±½è»Šçµæ§‹ã€‚â€‹</p>
                    <span class="tag">Lego</span>
                    <span class="tag">å‹•æ‰‹å¯¦é©—</span>
                </div>

                <div class="card">
                    <div class="card-date">ç·¨ç¨‹æ‡‰ç”¨</div>
                    <h3>A2 â€“ Microcontroller ERCèª²ç¨‹â€‹ <br>(ç·¨ç¨‹æ‡‰ç”¨ç¨‹å¼åŠä½¿ç”¨å­¸ç¿’)</h3>
                    <p>åœ¨å®Œæˆç¡¬é«”æ±½è»Šè£½ä½œå¾Œï¼Œéœ€ç‚ºè»Šè¼›ç·¨å¯«ç¨‹å¼ä»¥å¯¦ç¾æ‰€éœ€çš„è¡Œé€²æŒ‡ä»¤ã€‚åŒæ™‚ï¼Œå‘å­¸ç”Ÿè¬›è§£å¾é›¶é–‹å§‹ç·¨å¯«ç¨‹å¼åˆ°è»Šè¼›é †åˆ©è¡Œé§›çš„å…·é«”æ­¥é©Ÿï¼Œä¸¦ä»‹ç´¹å¦‚ä½•é€éç¨‹å¼è¨­è¨ˆå¯¦ç¾è½‰å½ã€å‰é€²ã€å¾Œé€€ç­‰åŠŸèƒ½çš„æ•¸æ“šè™•ç†æ–¹å¼ã€‚â€‹</p>
                    <span class="tag">ç·¨ç¨‹</span>
                    <span class="tag">å¾®æ§åˆ¶å™¨</span>
                </div>

                <div class="card">
                    <div class="card-date">å¯¦æ™¯æ¨¡æ“¬é§•é§›</div>
                    <h3>A3 â€“ Cospaces VR/ARâ€‹ <br>(å¯¦æ™¯è¦–åƒæ¨¡æ“¬é¡é ­æ“ä½œåŠé‹ç”¨)</h3>
                    <p>è¦å°‡é§•é§›çš„æ‰€æœ‰å·¥åºå¾è™›æ“¬å ´æ™¯è½‰åŒ–ç‚ºå¯¦éš›æ“ä½œï¼Œå¯ä»¥æ¡ç”¨è™›æ“¬çœ¼é¡æˆ–3Då¯¦æ™¯ç‰†å¼æŠ•å½±è¢å¹•é€²è¡Œé¡¯ç¤ºã€‚è»Šè¼›åœ¨å¯¦éš›å ´åœ°è¡Œé€²æ™‚ï¼Œç›¸é—œæ•¸æ“šå’Œç•«é¢å¯å³æ™‚å‘ˆç¾åœ¨é§•é§›è€…çš„æ§åˆ¶å™¨å°ä¸Šï¼Œè®“é§•é§›è€…é€éé¡ä¼¼é™æ§æ©Ÿå™¨äººçš„æ“ä½œæ–¹å¼ï¼Œç›´æ¥æ“æ§è»Šè¼›ã€‚â€‹</p>
                    <span class="tag">VR/AR</span>
                    <span class="tag">è™›æ“¬å ´æ™¯</span>
                </div>

                <div class="card">
                    <div class="card-date">é“è·¯å®‰å…¨æŠ€èƒ½</div>
                    <h3>A4 - å¯¦æ™¯æ“ä½œåŠæ•™è‚²é“è·¯å®‰å…¨å¸¸è­˜â€‹</h3>
                    <p>åœ¨è»Šè¼›è¡Œé€²çš„è·¯é¢è¨­è¨ˆä¸­ï¼Œå¯èå…¥çœŸå¯¦å ´æ™¯æ¨¡æ“¬ï¼Œä¾‹å¦‚äº¤é€šç‡ˆã€è·¯å£ã€è¿´æ—‹è™•ç­‰ï¼Œè®“å­¸ç¿’è€…æ ¹æ“šå¯¦éš›é“è·¯è¦å®šé€²è¡Œå®‰å…¨æ“ä½œã€‚é€™èƒ½æœ‰æ•ˆæå‡å­¸ç”Ÿå°äº¤é€šæ¨™èªŒå’ŒæŒ‡ç¤ºçš„æ•æ„Ÿåº¦ï¼Œé€²ä¸€æ­¥å¢å¼·é“è·¯å®‰å…¨æ„è­˜ã€‚â€‹</p>
                    <span class="tag">å¯¦æ™¯é§•é§›</span>
                    <span class="tag">é™æ§æ“ä½œ</span>
                </div>
            </div>
        </div>
    </section>

    <!-- === SECTION: CONTACT === -->
    <section id="contact" class="page-section">
        <div class="hero" style="height: 40vh;">
            <div class="hero-content">
                <h1>è¯çµ¡æˆ‘å€‘</h1>
                <p>æ­¡è¿è’è‡¨é«”é©—æ™ºèƒ½å¯¦æ™¯é§•é§›æ¨¡æ“¬ç³»çµ±</p>
            </div>
            <div class="slider-container">
                <div class="slide active" style="background-image: url('images/contact.png');"></div>
            </div>
        </div>

        <div class="container">
            <div class="grid-container" style="max-width: 900px; margin: 0 auto;">
                <div class="card">
                    <h3><i class="fas fa-map-marker-alt"></i> å¾·å®‰é§•é§›å­¸æ ¡</h3>
                    <p><strong>åœ°å€ï¼š</strong>é¦™æ¸¯ - é‡‘é˜é‡‘é˜é“ 95 è™Ÿ </p>
			<p>çµ±ä¸€ä¸­å¿ƒ 2 æ¨“ 2013 è™Ÿèˆ–<br><small>ï¼ˆæ¸¯éµé‡‘é˜ç«™ D å‡ºå£ï¼‰</small></p>
                    <p style="margin-top:15px;"><strong>é›»è©±ï¼š</strong> 2527 7799</p>
                    <p><strong>WhatsAppï¼š</strong> 9173 4677</p>
                </div>

                <div class="card">
                    <h3><i class="fas fa-vr-cardboard"></i> ERC é«”é©—é¤¨</h3>
                    <p><strong>åœ°å€ï¼š</strong>ä¹é¾ - ä¹é¾ç£è‡¨èˆˆè¡— 21 è™Ÿ</p>
			<p>ç¾ç¾…ä¸­å¿ƒäºŒæœŸ 17 æ¨“ 15 å®¤</p>
                    <p style="margin-top:15px; color: var(--electric-blue);">æ­¡è¿é ç´„åƒè§€</p>
                    <p style="margin-top:15px;"><strong>é›»è©±ï¼š</strong> 9606 1079</p>
                    <p><strong>WhatsAppï¼š</strong> 9606 1079</p>
                </div>
            </div>
        </div>
    </section>

    <!-- === SECTION: BOOKING (NEW) === -->
    <section id="booking" class="page-section">
        <div class="hero" style="height: 40vh;">
            <div class="hero-content">
                <h1>é ç´„é«”é©—</h1>
                <p>é¸æ“‡æ‚¨æ–¹ä¾¿çš„æ—¥æœŸå’Œæ™‚é–“ï¼Œè¦ªèº«é«”é©— ERC æ™ºèƒ½é§•é§›ï¼</p>
            </div>
            <div class="slider-container">
                <div class="slide active" style="background-image: url('images/banner1.jpg');"></div>
            </div>
        </div>

        <div class="container">
            <div class="booking-container">
                <h2 style="color: var(--text-main); margin-bottom: 20px;">é ç´„ ERC é«”é©—é¤¨æ™‚é–“</h2>
                
                <label for="booking-date">é¸æ“‡æ—¥æœŸï¼š</label>
                <input type="date" id="booking-date">

                <h3 style="color: var(--electric-blue); margin-top: 30px; margin-bottom: 15px;">å¯é ç´„æ™‚æ®µ (ä¸Šåˆ10:00 - ä¸‹åˆ5:00)</h3>
                <div id="time-slots-grid" class="time-slots-grid">
                    <!-- Time slots will be generated here by JavaScript -->
                </div>

                <form id="booking-form" class="booking-form" onsubmit="event.preventDefault(); submitBooking();">
                    <h3 style="color: var(--text-main); margin-bottom: 20px;">æ‚¨çš„è¯çµ¡è³‡æ–™</h3>
                    <div class="form-group">
                        <label for="booking-name">å§“åï¼š</label>
                        <input type="text" id="booking-name" placeholder="è«‹è¼¸å…¥æ‚¨çš„å§“å" required>
                    </div>
                    <div class="form-group">
                        <label for="booking-phone">é›»è©±ï¼š</label>
                        <input type="tel" id="booking-phone" placeholder="è«‹è¼¸å…¥æ‚¨çš„é›»è©±è™Ÿç¢¼" required>
                    </div>
                    <div class="form-group">
                        <label for="booking-email">é›»éƒµï¼š</label>
                        <input type="email" id="booking-email" placeholder="è«‹è¼¸å…¥æ‚¨çš„é›»éƒµåœ°å€" required>
                    </div>
                    <button type="submit" class="cta-button"><span>ç¢ºèªé ç´„</span></button>
                </form>
            </div>
        </div>
    </section>

    <!-- === SECTION: DOWNLOAD === -->
    <section id="download" class="page-section">
        <div class="hero" style="height: 40vh;">
            <div class="hero-content">
                <h1>é§•é§›è»Ÿé«”ä¸‹è¼‰</h1>
                <p>Download the host application to connect your wheel to the car.</p>
            </div>
            <div class="slider-container">
                <div class="slide active" style="background-image: url('images/banner2.jpg');"></div>
            </div>
        </div>

        <div class="container">
            <div class="download-container">
                <i class="fas fa-box-open" style="font-size: 4rem; color: var(--racing-red); margin-bottom: 20px;"></i>
                <h2 style="margin-bottom: 10px;">ERC Host Controller</h2>
                <span style="background:var(--electric-blue); color:white; padding:3px 8px; border-radius:4px; font-size:0.9rem;">Version 1.2.0 (Stable)</span>
                
                <p style="margin-top: 20px; color: var(--text-muted);">
                    æ­¤è»Ÿé«”ä½œç‚º PC èˆ‡ ERC è»Šè¼›ä¹‹é–“çš„æ©‹æ¨‘ï¼Œè² è²¬è™•ç†è¼¸å…¥æ˜ å°„ã€WiFi é€£æ¥å’Œé™æ¸¬é¡¯ç¤ºã€‚
                </p>

                <div class="requirements">
                    <h4><i class="fas fa-cogs"></i> ç³»çµ±éœ€æ±‚</h4>
                    <ul>
                        <li><i class="fas fa-check"></i> Windows 10 / 11 (64-bit)</li>
                        <li><i class="fas fa-check"></i> å·²å®‰è£ Logitech G-Hub</li>
                        <li><i class="fas fa-check"></i> WiFi æ¥æ”¶å™¨ (éœ€æ”¯æ´ 2.4GHz)</li>
                        <li><i class="fas fa-check"></i> .NET Framework 4.8 æˆ–æ›´é«˜ç‰ˆæœ¬</li>
                    </ul>
                </div>

                <!-- DOWNLOAD LINK -->
                <a href="https://drive.google.com/file/d/1pPSq7irpVbjj8yRFcxqzQFPFOSOqwrGa/view?usp=sharing" class="cta-button" >
                    <span><i class="fas fa-download"></i> ä¸‹è¼‰å®‰è£ç¨‹å¼ (.exe)</span>
                </a>
                
                <div style="margin-top: 20px; font-size: 0.8rem; color: #888;">
                    SHA-256: 8A2F... | å¤§å°: 45MB
                </div>
            </div>
        </div>
    </section>

    <!-- FOOTER -->
    <footer>
        <div class="logo" style="font-size: 1.2rem; margin-bottom: 20px;">ERC <span>Project</span></div>
        <p>&copy; 2025 ERC æ™ºèƒ½å¯¦æ™¯é§•é§›é«”é©—é¤¨ Â· å¾·å®‰é§•é§›å­¸æ ¡æœ‰é™å…¬å¸</p>
        <p>æ™ºèƒ½é§•é§›é«”é©— | STEM æ•™è‚²å‰µæ–° | å®‰å…¨é§•é§›åŸ¹è¨“</p>
    </footer>

    <!-- JAVASCRIPT LOGIC -->
    <!-- FIREBASE & APP LOGIC -->
    <script type="module">
    // 1. Import Firebase SDKs (App, Analytics, and Firestore)
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-analytics.js";
    import { getFirestore, collection, addDoc, query, where, getDocs, serverTimestamp } 
        from "https://www.gstatic.com/firebasejs/12.7.0/firebase-firestore.js";

    // 2. Your Web App Configuration
    const firebaseConfig = {
        apiKey: "AIzaSyB8UQ5702asQU7SGyfGhTgfZBmLv5FjUbc",
        authDomain: "erc-booking.firebaseapp.com",
        projectId: "erc-booking",
        storageBucket: "erc-booking.firebasestorage.app",
        messagingSenderId: "69669577622",
        appId: "1:69669577622:web:ac786d4615a81b4507b3b7",
        measurementId: "G-XRHJRLPBR6"
    };

    // 3. Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
    const db = getFirestore(app); // Initialize Database

    // --- PAGE NAVIGATION LOGIC ---
    // We attach functions to 'window' so your HTML onclick="" attributes can find them

    // --- MOBILE MENU TOGGLE LOGIC ---
    window.toggleMobileMenu = function() {
        const navLinks = document.getElementById('mobile-nav-links');
        if (navLinks) {
            navLinks.classList.toggle('open');
            // Optional: Change the icon from bars to times (X) when open
            const menuToggleIcon = document.querySelector('.menu-toggle i');
            if (navLinks.classList.contains('open')) {
                menuToggleIcon.classList.remove('fa-bars');
                menuToggleIcon.classList.add('fa-times');
            } else {
                menuToggleIcon.classList.remove('fa-times');
                menuToggleIcon.classList.add('fa-bars');
            }
        }
    };

    window.showPage = function(pageId) {
        const sections = document.querySelectorAll('.page-section');
        sections.forEach(section => section.classList.remove('active'));

        const buttons = document.querySelectorAll('.nav-btn');
        buttons.forEach(btn => btn.classList.remove('active'));

        const selectedSection = document.getElementById(pageId);
        if (selectedSection) selectedSection.classList.add('active');

        // Highlight Nav
        const navButtons = Array.from(document.querySelectorAll('.nav-btn'));
        const matchingBtn = navButtons.find(btn => {
            const onclickAttr = btn.getAttribute('onclick');
            return onclickAttr && onclickAttr.includes(pageId);
        });
        if (matchingBtn) matchingBtn.classList.add('active');

        // Trigger Booking Logic if entering booking page
        if (pageId === 'booking') {
            generateTimeSlots();
        }

        const navLinks = document.getElementById('mobile-nav-links');
        if (navLinks && navLinks.classList.contains('open')) {
            navLinks.classList.remove('open');
            // Reset menu icon
            const menuToggleIcon = document.querySelector('.menu-toggle i');
            menuToggleIcon.classList.remove('fa-times');
            menuToggleIcon.classList.add('fa-bars');
     

        window.scrollTo(0, 0);
    }

    // --- BOOKING SYSTEM VARIABLES ---
    let selectedBookingDate = '';
    let selectedBookingTime = '';

    // --- GENERATE TIME SLOTS (CHECKING FIREBASE) ---
    window.generateTimeSlots = async function() {
        const timeSlotsContainer = document.getElementById('time-slots-grid');
        const dateInput = document.getElementById('booking-date');
        
        if (!timeSlotsContainer || !dateInput.value) return;

        timeSlotsContainer.innerHTML = '<p style="grid-column: 1/-1; text-align:center;">æ­£åœ¨æª¢æŸ¥é ç´„ç‹€æ³...</p>'; 

        const selectedDate = dateInput.value;
        
        // 1. Check Firebase for existing bookings on this date
        const bookingsRef = collection(db, "bookings");
        const q = query(bookingsRef, where("date", "==", selectedDate));
        const querySnapshot = await getDocs(q);

        const bookedTimes = new Set();
        querySnapshot.forEach((doc) => {
            bookedTimes.add(doc.data().time);
        });

        // 2. Render Slots
        timeSlotsContainer.innerHTML = ''; 
        const startTimeMinutes = 10 * 60; // 10:00 AM
        const endTimeMinutes = 17 * 60;   // 5:00 PM
        const interval = 30;

        for (let minutes = startTimeMinutes; minutes <= endTimeMinutes; minutes += interval) {
            const hours = Math.floor(minutes / 60);
            const mins = minutes % 60;
            const timeString = `${hours.toString().padStart(2, '0')}:${mins.toString().padStart(2, '0')}`;

            const slotButton = document.createElement('button');
            slotButton.classList.add('time-slot-btn');
            slotButton.textContent = timeString;
            slotButton.setAttribute('data-time', timeString);

            // If time is in bookedTimes, disable it
            if (bookedTimes.has(timeString)) {
                slotButton.disabled = true;
                slotButton.style.backgroundColor = '#ccc';
                slotButton.style.color = '#666';
                slotButton.style.cursor = 'not-allowed';
                slotButton.title = "å·²é ç´„";
            } else {
                slotButton.onclick = function() { selectTimeSlot(this); };
            }

            timeSlotsContainer.appendChild(slotButton);
        }
    }

    window.selectTimeSlot = function(button) {
        const allSlots = document.querySelectorAll('.time-slot-btn');
        allSlots.forEach(slot => slot.classList.remove('active'));
        button.classList.add('active');
        selectedBookingTime = button.getAttribute('data-time');
        
        const dateInput = document.getElementById('booking-date');
        if (dateInput) selectedBookingDate = dateInput.value;
    }

    // --- SUBMIT BOOKING (WRITE TO FIREBASE) ---
    // --- SUBMIT BOOKING & HANDOFF TO WHATSAPP ---
    window.submitBooking = async function() {
        // 1. Get User Input
        const name = document.getElementById('booking-name').value;
        const phone = document.getElementById('booking-phone').value;
        const email = document.getElementById('booking-email').value;

        // Validation
        if (!selectedBookingDate || !selectedBookingTime || !name || !phone || !email) {
            alert('è«‹å¡«å¯«æ‰€æœ‰é ç´„è³‡è¨Šä¸¦é¸æ“‡æ™‚é–“ï¼');
            return;
        }

        // Disable button to prevent double-clicks
        const submitBtn = document.querySelector('.booking-form button[type="submit"]');
        if(submitBtn) {
            submitBtn.disabled = true;
            submitBtn.innerHTML = "è™•ç†ä¸­...";
        }

        try {
            // 2. Save to Firebase (This is your Database Backup)
            await addDoc(collection(db, "bookings"), {
                name: name,
                phone: phone,
                email: email,
                date: selectedBookingDate,
                time: selectedBookingTime,
                created_at: serverTimestamp() // Adds the server time
            });

            // 3. Construct the WhatsApp Message
            // We use \n for line breaks.
            const waMessage = 
                `ä½ å¥½ ERCï¼Œæˆ‘æƒ³é ç´„é«”é©—ã€‚\n\n` +
                `ğŸ‘¤ *å§“å:* ${name}\n` +
                `ğŸ“± *é›»è©±:* ${phone}\n` +
                `ğŸ“§ *é›»éƒµ:* ${email}\n` +
                `ğŸ“… *æ—¥æœŸ:* ${selectedBookingDate}\n` +
                `â° *æ™‚é–“:* ${selectedBookingTime}`;

            // 4. Create the Link
            // 85296061079 is your number. encodeURIComponent ensures spaces/symbols work.
            const waUrl = `https://wa.me/85255379080?text=${encodeURIComponent(waMessage)}`;

            // 5. Open WhatsApp
            // Opens in a new tab so they don't lose your website
            window.open(waUrl, '_blank');

            // Success Alert
            alert('è³‡æ–™å·²å„²å­˜ï¼æˆ‘å€‘å°‡è½‰è‡³ WhatsApp ä»¥ä¾¿æ‚¨ç™¼é€é ç´„è©³æƒ…ã€‚');
            
            // Reset Form & Refresh Slots
            document.getElementById('booking-form').reset();
            selectedBookingDate = '';
            selectedBookingTime = '';
            generateTimeSlots(); 

        } catch (e) {
            console.error("Error adding document: ", e);
            alert("é ç´„å¤±æ•—ï¼Œè«‹æª¢æŸ¥ç¶²çµ¡é€£æ¥ã€‚");
        } finally {
            // Re-enable button
            if(submitBtn) {
                submitBtn.disabled = false;
                submitBtn.innerHTML = "<span>ç¢ºèªé ç´„</span>";
            }
        }
    }

    // --- SLIDER LOGIC ---
    let currentSlide = 0;
    const slides = document.querySelectorAll('#home .slide');
    const totalSlides = slides.length;
    let autoSlideInterval;

    window.changeSlide = function(direction) {
        if (slides.length === 0) return;
        slides[currentSlide].classList.remove('active');
        currentSlide = currentSlide + direction;
        if (currentSlide >= totalSlides) currentSlide = 0;
        else if (currentSlide < 0) currentSlide = totalSlides - 1;
        slides[currentSlide].classList.add('active');
    }

    function startAutoSlide() {
        autoSlideInterval = setInterval(() => changeSlide(1), 5000);
    }
    if (totalSlides > 0) startAutoSlide();

    // --- INITIALIZATION ---
    document.addEventListener('DOMContentLoaded', () => {
        const dateInput = document.getElementById('booking-date');
        if (dateInput) {
            const today = new Date();
            const yyyy = today.getFullYear();
            const mm = (today.getMonth() + 1).toString().padStart(2, '0');
            const dd = today.getDate().toString().padStart(2, '0');
            const todayString = `${yyyy}-${mm}-${dd}`;

            dateInput.value = todayString;
            selectedBookingDate = todayString;
            dateInput.min = todayString;

            dateInput.addEventListener('change', (event) => {
                selectedBookingDate = event.target.value;
                selectedBookingTime = '';
                generateTimeSlots(); 
            });
        }
    });
    </script>
</body>
</html>
